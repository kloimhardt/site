<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Drawing on the Logarithmic Scale</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-187c114db1af335f6934abea26284e59.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body>

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Drawing on the Logarithmic Scale</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<script>
document.addEventListener('contextmenu', event => event.preventDefault());
</script>
<script type="text/javascript" charset="UTF-8" src="jsfiles/jsxgraph/distrib/jsxgraphcore.js"></script>
<p><link rel="stylesheet" type="text/css" href="jsfiles/jsxgraph/distrib/jsxgraph.css"></p>
<script>var SCITTLE_NREPL_WEBSOCKET_PORT = 1340;</script>
<script src="jsfiles/scittle/dist/scittle.js" type="application/javascript"></script>
<script src="jsfiles/scittle/dist/scittle.nrepl.js" type="application/javascript"></script>
<script src="jsfiles/blockly/blockly_compressed.js"></script>
<script src="jsfiles/blockly/msg/en.js"></script>
<script src="jsfiles/twotiles/twotiles_core.js"></script>
<p><link rel="stylesheet" type="text/css" href="jsfiles/rigsomelight.com/css/syntax.css"></p>
<p><link rel="stylesheet" type="text/css" href="jsfiles/rigsomelight.com/assets/bootstrap/css/bootstrap.css"></p>
<p><link rel="stylesheet" type="text/css" href="jsfiles/rigsomelight.com/assets/css/style.css"></p>
<p><link rel="stylesheet" type="text/css" href="jsfiles/rigsomelight.com/assets/inline-edit/css/style.css"></p>
<p><link rel="stylesheet" type="text/css" href="jsfiles/log.css"></p>
<script>
var parse = scittle.core.eval_string(twotiles.parse_clj);
Blockly.defineBlocksWithJsonArray(twotiles.blocks);
</script>
<script>
var cleandiv = (divid) => {
const el = document.getElementById(divid);
while (el.firstChild) el.removeChild(el.firstChild);
}
var brenderT = (code,divid, bTrash) => {
cleandiv(divid);
let ws = Blockly.inject(divid,
{"sounds": false,
"scrollbars": false,
"trashcan": bTrash});

Blockly.Xml.clearWorkspaceAndLoadFromXml(Blockly.utils.xml.textToDom(parse(code)), ws);

return ws;
}

var brender = (code,divid) => brenderT(code,divid, false)
</script>
<script>var statejs = {};</script>
<script>
const delay = ms => new Promise(res => setTimeout(res, ms));
</script>
<div class="hidden">
<div id="d705ed61" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Code Preamble</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sympy</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sympy <span class="im">import</span> symbols, diff, ln</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sympy.codegen.cfunctions <span class="im">import</span> log2</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> functools</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>x0<span class="op">=</span>symbols(<span class="st">"x0"</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>x1<span class="op">=</span>symbols(<span class="st">"x1"</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> call(f, x):</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> f(x)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> mapv(a, b):</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">list</span>(<span class="bu">map</span>(a, <span class="bu">map</span>(<span class="kw">lambda</span> x: <span class="fl">1.0</span> <span class="op">*</span> x, b)))</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> PipeAsCall(<span class="bu">object</span>):</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, func):</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.func <span class="op">=</span> func</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__or__</span>(<span class="va">self</span>, other):</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.func(other)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__call__</span>(<span class="va">self</span>, x):</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.func(x)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> partial(<span class="op">*</span>args):</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> PipeAsCall(</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>        functools.partial(<span class="op">*</span>args))</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> D(f):</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  var <span class="op">=</span> symbols(<span class="st">"var"</span>)</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> PipeAsCall(sympy.lambdify([var], diff(f(var), var), <span class="st">"sympy"</span>))</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rnd(expr):</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>     <span class="cf">return</span> expr.xreplace({n: <span class="bu">round</span>(n, <span class="dv">3</span>) <span class="cf">for</span> n <span class="kw">in</span> expr.atoms(sympy.Number)})</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot(f, x):</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    plt.plot(x, mapv(f, x), <span class="st">"o"</span>)</span></code></pre></div>
</details>
</div>
</div>
<div class="hidden">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> inspect</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># https://muted.io/note-frequencies/</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> np.genfromtxt(<span class="st">'notes.txt'</span>, delimiter<span class="op">=</span><span class="st">'</span><span class="ch">\t</span><span class="st">'</span>, dtype<span class="op">=</span><span class="bu">str</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>row_names <span class="op">=</span> data[:, <span class="dv">0</span>].tolist()</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>numerical_data <span class="op">=</span> np.matrix.transpose(data[:, <span class="dv">1</span>:]).astype(<span class="bu">float</span>).tolist()</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>               </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"&lt;script&gt;"</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"statejs['notenames']= "</span>)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(json.dumps(row_names))</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"statejs['frequencies']= "</span>)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>nofreq <span class="op">=</span> [item</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> subl <span class="kw">in</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>      [<span class="bu">list</span>(<span class="bu">map</span>(<span class="kw">lambda</span> n,f: [n, idx, f], row_names, fs))</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> idx, fs <span class="kw">in</span> <span class="bu">enumerate</span>(numerical_data)]</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>   <span class="cf">for</span> item <span class="kw">in</span> subl]</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(json.dumps([[nf[<span class="dv">0</span>] <span class="op">+</span> <span class="bu">str</span>(nf[<span class="dv">1</span>]), nf[<span class="dv">2</span>]] <span class="cf">for</span> nf <span class="kw">in</span> nofreq <span class="cf">if</span> <span class="kw">not</span> nf[<span class="dv">0</span>].endswith(<span class="st">"s"</span>)]))</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"&lt;/script&gt;"</span>)</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="co"># instead of using the plain js</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="co"># print("&lt;script src='jsfiles/notes.js'&gt;&lt;/script&gt;")</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="co"># we load the respective Scittle code</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"&lt;script&gt;"</span>)</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'notes.cljs'</span>, <span class="st">'r'</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> <span class="bu">file</span>.read().replace(<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>, <span class="st">''</span>)</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"scittle.core.eval_string('"</span>, data, <span class="st">"')"</span>)</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"&lt;/script&gt;"</span>)</span></code></pre></div>
<script>
statejs['notenames']= 
["C", "Cs", "D", "Ds", "E", "F", "Fs", "G", "Gs", "A", "As", "B"]
statejs['frequencies']= 
[["C0", 16.35], ["D0", 18.35], ["E0", 20.6], ["F0", 21.83], ["G0", 24.5], ["A0", 27.5], ["B0", 30.87], ["C1", 32.7], ["D1", 36.71], ["E1", 41.2], ["F1", 43.65], ["G1", 49.0], ["A1", 55.0], ["B1", 61.74], ["C2", 65.41], ["D2", 73.42], ["E2", 82.41], ["F2", 87.31], ["G2", 98.0], ["A2", 110.0], ["B2", 123.47], ["C3", 130.81], ["D3", 146.83], ["E3", 164.81], ["F3", 174.61], ["G3", 196.0], ["A3", 220.0], ["B3", 246.94], ["C4", 261.63], ["D4", 293.66], ["E4", 329.63], ["F4", 349.23], ["G4", 392.0], ["A4", 440.0], ["B4", 493.88], ["C5", 523.25], ["D5", 587.33], ["E5", 659.25], ["F5", 698.46], ["G5", 783.99], ["A5", 880.0], ["B5", 987.77], ["C6", 1046.5], ["D6", 1174.66], ["E6", 1318.51], ["F6", 1396.91], ["G6", 1567.98], ["A6", 1760.0], ["B6", 1975.53], ["C7", 2093.0], ["D7", 2349.32], ["E7", 2637.0], ["F7", 2793.83], ["G7", 3135.96], ["A7", 3520.0], ["B7", 3951.0], ["C8", 4186.0], ["D8", 4698.63], ["E8", 5274.0], ["F8", 5587.65], ["G8", 6271.93], ["A8", 7040.0], ["B8", 7902.13]]
</script>
<script>
scittle.core.eval_string(' (ns notes)(defmacro deepdef [v e] `(def ~v ~e))(defn drawstiel1 [bnotes2 shift len]  (fn [name]    (let [bp (.select bnotes2 name)]      (. bnotes2         (create "line"                 #js[#js[(fn [] (+ (.X bp) shift)) (fn [] (.Y bp))]                     #js[(fn [] (+ (.X bp) shift)) (fn [] (+ (.Y bp) len))]]                 #js{:name          (str "stlm" name)                     :straightFirst false                     :straightLast  false                     :strokeWidth   4                     :strokeColor   "black"})))))(defn plotpoints1 [bnotes2 vpp]  (run! (fn [d]          (. bnotes2 (create "point"                             #js[(:sx d) (:y d)]                             #js{:name  (:name d)                                 :color "black"})))        vpp))(defn drawlines [bnotes2 names]  (run! (fn [name]          (let [p (.select bnotes2 name)]            (. bnotes2 (create "line"                               #js[#js[150 (.Y p)] #js[1050 (.Y p)]]                               #js{:straightFirst false                                   :straightLast  false                                   :strokeWidth   1                                   :strokeColor   "black"}))))        names)  (.. bnotes2 (select "G3") (setLabel "")))(def idx220 26)(defn drawclef [brd]  (drawlines brd ["E4" "G4" "B4" "D5" "F5"])  (. brd (create "image"                     #js["https://upload.wikimedia.org/wikipedia/commons/f/ff/GClef.svg"                         #js[166 0.5]                         #js[76 -15]])))(defn plotpoints [bnotes2 vpp]  (plotpoints1 bnotes2 vpp)  (drawclef bnotes2)  (run! (fn [name]          (.. bnotes2 (select name) (setAttribute #js{:size 9})))        ["D4" "E4" "F4" "G4" "A4" "B4" "C5" "D5" "E5" "F5" "G5"])  (run! (drawstiel1 bnotes2 9 7)        ["D4" "E4" "F4" "G4" "A4"])  (run! (drawstiel1 bnotes2 -9 -7)        ["B4" "C5" "D5" "E5" "F5" "G5"]))(defn straight1 [y d] (* (- y d) (/ 440 7)))(defn vpp [frequencies]  (into []        (map-indexed (fn [i [name x]]                       (let [y (- i idx220)]                         {:name name                          :x    x :sx (straight1 y -2.7)                          :y    y}))                     frequencies)))(defn brdspec [bb &[axis xname yname]]  {:boundingbox   bb   :showNavigation false   :showCopyright true   :axis          (or axis false)   :grid          false   :defaultAxes   {:x {:name      (or xname "")        :withLabel true        :label     {:position "rt"                    :offset   [-5 15]                    :anchorX  "right"}        :ticks     {:visible     true                    :majorHeight 5}}    :y {:withLabel true        :name      (or yname "")        :label     {:position "rt"                    :offset   [5 -5]                    :anchorY  "top"}        :ticks {:visible     true                :majorHeight 5} }}}  )(defn main [divid]  (set! (.. js/statejs -notes -bnotes2)        (.. js/JXG            -JSXGraph            (initBoard divid                       (clj->js (brdspec [120 (- 48 idx220)                                          1080 (- 20 idx220)])))))  (plotpoints (.. js/statejs -notes -bnotes2)              (vpp (js->clj (.-frequencies js/statejs)))))((js->clj (.-frequencies js/statejs)) 26)((vpp (js->clj (.-frequencies js/statejs))) 26)(defn octave [y o]  (let [bnotes2 (.. js/statejs -notes -bnotes2)        pp      (vpp (js->clj (.-frequencies js/statejs)))]    (. bnotes2       (create "line"               (let [p1 (.select bnotes2 (:name (pp y)))                     p2 (.select bnotes2 (:name (pp (+ y o))))]                 #js[p1                     #js[(fn [] (.X p2)) (fn [] (.Y p1))]])               #js{:name          (str "oct" (:name (pp y)))                   :straightFirst false                   :straightLast  false                   :strokeWidth   2                   :strokeColor   "red"}))))(defn anim1 []  (octave 26 7)  (octave 40 -7))(defn anim2 []  (let [bnotes2 (.. js/statejs -notes -bnotes2)        pp      (vpp (js->clj (.-frequencies js/statejs)))]    (run!      (fn [tu]        (.. bnotes2            (select (:name tu))            (moveTo #js[(:x tu) (:y tu)] 1500)))      pp)))(defn anim3 []  #_(anim3)  (let [bnotes2 (.. js/statejs -notes -bnotes2)]    (run! (fn [[l f]]            (.create bnotes2                     "text"                     #js[f -2 (str l f " Hz")]                     #js{:fontsize 20 :color "black"}))          [["" 220] ["" 440] ["" 880]])))(defn anim5 []  (let [bnotes2 (.. js/statejs -notes -bnotes2)]    (.create bnotes2             "functiongraph"             #js["(7 * log(x / 220)) / log(2)"]             #js{:strokeColor "red" :strokeWidth 2})))(defn anim6 []  (set! (.. js/statejs -notes -bnotes2)        (.. js/JXG            -JSXGraph            (initBoard "divnotes2"                       (clj->js (brdspec [-320 33                                          1480 -18]                                         true                                         "Frequency"                                         "log2")))))  (run! (fn [d]          (.. js/statejs -notes -bnotes2              (create "point"                      #js[(:x d) (:y d)]                      #js{:name  (:name d)                          :color "black"                          })              (setLabel "")))        (vpp (js->clj (.-frequencies js/statejs))))  (doto (.. js/statejs -notes -bnotes2)    (drawclef )    (.create      "functiongraph"      #js["(7 * log(x / 220)) / log(2)"]      #js{:strokeColor "red" :strokeWidth 2})    #_(.create      "text"      #js[1100 22 "Logarithm"]      #js{:fontSize 24}))  (anim1))(set! (.. js/statejs -notes) #js{})(set! (.. js/statejs -notes -main) main)(set! (.. js/statejs -notes -anim1) anim1)(set! (.. js/statejs -notes -anim2) anim2)(set! (.. js/statejs -notes -anim3) anim3)(set! (.. js/statejs -notes -anim5) anim5)(set! (.. js/statejs -notes -anim6) anim6)(comment  (do    (main "divnotes2")    (def bnotes2 (.. js/statejs -notes -bnotes2))    )  (anim1)  (anim2)  (anim3)  (anim5)  (anim6)  :end) ')
</script>
</div>
<!--
> The Pythagoreans have shown that the pitch of a tone depends on the length of a cord. This was the first successful reduction of quality to quantity and therefore the beginning of science.  
> - Arthur Koestler, the Sleepwalkers
-->
<details>
<summary id="1">
1
</summary>
<div id="divnotes2" class="jxgbox" style="height:300px;">

</div>
<script>statejs.notes.main("divnotes2");</script>
<p><span onclick="statejs.notes.main('divnotes2')" style="color:blue">A</span> <span onclick="statejs.notes.anim1()" style="color:blue">B</span> <span onclick="statejs.notes.anim2()" style="color:blue">C</span> <span onclick="statejs.notes.anim3()" style="color:blue">D</span> <span onclick="statejs.notes.anim5()" style="color:blue">E</span> <span onclick="statejs.notes.anim6()" style="color:blue">F</span></p>
<div id="divnotes2_t" class="desc">
<p>Sometimes, you need to start with the basics. I am sure you all have your own ways to do graphs. So you don’t really need this, but I think my way has its own value. In a minute, I will show the main point for you to decide. But in the first step, I needed to make a choice for the mathematical target to plot. It could have been anyone. I chose the musical scale. – The notes are logarithmic.</p>
</div>
</details>

<div class="no-row-height column-margin column-container"><div class="">
<p><a href="#1" onclick="statejs.notes.anim6(); cleandiv('divnotes2_t')">_</a></p>
</div></div><script>var wslog2; //for .markFocused() , but that does not prevent the scrolling down to the last workspace</script>
<details>
<summary id="2">
2
</summary>
<div id="blocklyDivLog2" onclick="wslog2.markFocused();" style="height: 300px;">

</div>
<script>
function v2() {
wslog2=brender("(:tiles/infix (* (log2 (:tiles/infix (/ x 220))) 7))", "blocklyDivLog2");
}
v2();
</script>
<div id="blocklyDivLog2_t" class="desc">
<p>To make it fit the notes, you need to insert some scale factors into the logarithmic formula. – But I have jumped ahead. I need to plot the plain log2 first.</p>
</div>
</details>

<div class="no-row-height column-margin column-container"><div class="">
<p><a href="#2" onclick="v2(); cleandiv('blocklyDivLog2_t')">_</a></p>
</div></div><div class="hidden">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"&lt;script&gt;"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'log23.cljs'</span>, <span class="st">'r'</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> <span class="bu">file</span>.read().replace(<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>, <span class="st">''</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"scittle.core.eval_string('"</span>, data, <span class="st">"')"</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"&lt;/script&gt;"</span>)</span></code></pre></div>
<script>
scittle.core.eval_string(' (ns log23)(defn am [xname yname bbox &[grid]]  {:boundingbox    bbox   :showCopyright  false   :axis           true   :grid           (or grid false)   :showNavigation false   :defaultAxes   {:x {:name      xname        :withLabel true        :label     {:position "rt"                    :offset   [-5 15]                    :anchorX  "right"}        :ticks     {:visible     true                    :majorHeight 5}}    :y {:withLabel true        :name      yname        :label     {:position "rt"                    :offset   [5 -5]                    :anchorY  "top"}        :ticks {:visible     true                :majorHeight 5} }}}  )(defn mainlog [divid name]  (let [bb [120 (- 48 notes/idx220)            1080 (- 20 notes/idx220)]        am (am "Frequency [Hz]" name bb)]    (set! (.. js/statejs -log23 -brd)          (.. js/JXG              -JSXGraph              (initBoard divid (clj->js am)))))  (let [brd (.. js/statejs -log23 -brd)]    (.create brd             "functiongraph"             #js["(7 * log(x / 220)) / log(2)"]             #js{:strokeColor "red"                 :strokeWidth 2})    (run! (fn [l]            (.create brd "line"                     (clj->js l)                     #js{:straightFirst false                         :straightLast  false                         :strokeWidth   1                         :strokeColor   "black"}))          [[[0 7] [440 7]]           [[440 7] [440 0]]           [[0 14] [880 14]]           [[880 14] [880 0]]])    ))(defn main [divid]  (mainlog divid "log2(x/220) * 7"))(set! (.. js/statejs -log23) #js{})(set! (.. js/statejs -log23 -main) main)(defn anim2 []  (let [brd (.. js/statejs -log23 -brd)]    (.setBoundingBox brd #js[-320 33                             1480 -18])))(set! (.. js/statejs -log23 -anim2) anim2)(defn log3 [divid]  #_(log3 "divlog2x")  (let [bb [-5 6            35 -3]        am (am "" "" bb true)]    (set! (.. js/statejs -log23 -brd3)          (.. js/JXG              -JSXGraph              (initBoard divid (clj->js am)))))  (let [brd (.. js/statejs -log23 -brd3)]    (.create brd             "functiongraph"             #js["log(x) / log(2)"]             #js{:strokeColor "green"                 :strokeWidth 2}))  )(defn log3anim2 []  (run! (fn [l]          (.. js/statejs -log23 -brd3              (create "line"                      (clj->js l)                      #js{:straightFirst false                          :straightLast  false                          :strokeWidth   1                          :strokeColor   "black"})))        [[[0 3] [8 3]]         [[8 3] [8 0]]]))(defn log3anim3 []  (run! (fn [l]          (.. js/statejs -log23 -brd3              (create "line"                      (clj->js l)                      #js{:straightFirst false                          :straightLast  false                          :strokeWidth   1                          :strokeColor   "black"})))        [[[0 4] [16 4]]         [[16 4] [16 0]]         [[0 5] [32 5]]         [[32 5] [32 0]]         ]))(set! (.. js/statejs -log23 -log3) log3)(set! (.. js/statejs -log23 -log3anim2) log3anim2)(set! (.. js/statejs -log23 -log3anim3) log3anim3)(defn log2b [divid]  (let [bb [-2.5 6            35 -3]        am (am "" "" bb true)]    (set! (.. js/statejs -log23 -brd2b)          (.. js/JXG              -JSXGraph              (initBoard divid (clj->js am)))))  (let [brd (.. js/statejs -log23 -brd2b)]    (.create brd             "functiongraph"             #js["log(x) / log(2)"]             #js{:strokeColor "green"                 :strokeWidth 2})    (.create brd "text" #js[2.1 2.4 "steps=1"])    #_(log2b "divlog20_2")))(defn log2banim2 []  (let [brd (.. js/statejs -log23 -brd2b)]    (.create brd             "functiongraph"             #js["0.7 * log(x) / log(2)"]             #js{:strokeColor "blue"                 :strokeWidth 2})    (.create brd "text" #js[6 1.5 "steps=0.7"])))(set! (.. js/statejs -log23 -log2b) log2b)(set! (.. js/statejs -log23 -log2banim2) log2banim2)(defn logtri [divid]  #_(logtri "divlogtri")  (let [bb [-0.4 2            6 -2]        am (am "" "" bb true)]    (set! (.. js/statejs -log23 -brdtri)          (.. js/JXG              -JSXGraph              (initBoard divid (clj->js am)))))  (let [brd (.. js/statejs -log23 -brdtri)]    (.create brd             "functiongraph"             #js["0.7 * log(x) / log(2)"]             #js{:strokeColor "blue"                 :strokeWidth 2})    (.create brd "text" #js[0.3 -1.3 "steps=0.7"])    )  )(set! (.. js/statejs -log23 -logtri) logtri)(defn triangles [b x dx f & [argzero]]    (let [zero (or argzero (f x))          t0 (.create b "point" #js[x zero])          t1 (.create b "point"                      #js[(fn [] (+ (.X t0) dx))                                     (fn [] (.Y t0))]                      #js{:visible false})          t2 (.create b "point"                      #js[(fn [] (+ (.X t0) dx))                                     (fn [] (+ (.Y t0)                                               (- (f (+ x dx)) zero)))]                      #js{:visible false})]      (run! (fn [p] (.setLabel p "")) [t0 t1 t2])      [t0 t1 t2 (.create b "polygon" #js[t0 t1 t2])]))  (defn repl-poly [b t]    (let [xys  (map (fn [p] [(.X p) (.Y p)]) (butlast t))          npts (mapv (fn [xy] (.create b "point" (clj->js xy) #js{:visible false})) xys)          nply (.create b "polygon" (clj->js npts))          ]      (.setLabel (first npts) "")      (.setAttribute (first npts) #js{:visible true})      (run! (fn [o] (.removeObject b o)) (reverse t))      (conj npts nply)))  (defn shrink [b t]    (let [tn (repl-poly b t)          faktor 0.5          hohe   (- (.Y (tn 2)) (.Y (tn 1)))]      (.moveTo (tn 0) #js[(+ (.X (tn 0)) faktor) (+ (.Y (tn 0)) (* faktor hohe))] 1500)      (.moveTo (tn 1) #js[(.X (tn 1)) (+ (.Y (tn 1)) (* faktor hohe))] 1500)))  (defn trianim2 []    (set! (.. js/statejs -log23 -tri_ts)          (doall (map (fn [x] (triangles                                (.. js/statejs -log23 -brdtri)                                x                                1                                js/Math.log))                      [2 3 4]))))  (defn trianim3 []    (run! (fn [[t]] (.moveTo t #js[(.X t) 0] 1500))          (.. js/statejs -log23 -tri_ts)))  (defn trianim4 []    (.create (.. js/statejs -log23 -brdtri)             "functiongraph"             #js["1/x"]             #js{:strokeColor "black"                 :strokeWidth 1})    #_(trianim4)    (.create (.. js/statejs -log23 -brdtri)             "text"             #js[1.2 1.2 (.. js/statejs -strfrac1ovX)]             #js{:useMathJax true :fontSize 24}))(defn trianim5 []  (set! (.. js/statejs -log23 -tri_t0)        (triangles (.. js/statejs -log23 -brdtri)                   0                   1                   (fn [x] (/ 1 x))                   0)))(defn trianim6 []  (.moveTo (first (.. js/statejs -log23 -tri_t0)) #js[0 -1] 1500))(defn trianim7 []  (shrink (.. js/statejs -log23 -brdtri) (.. js/statejs -log23 -tri_t0)))(set! (.. js/statejs -log23 -trianim2) trianim2)(set! (.. js/statejs -log23 -trianim3) trianim3)(set! (.. js/statejs -log23 -trianim4) trianim4)(set! (.. js/statejs -log23 -trianim5) trianim5)(set! (.. js/statejs -log23 -trianim6) trianim6)(set! (.. js/statejs -log23 -trianim7) trianim7)(comment  (do    (main "divlog23")    (def brd (.. js/statejs -log23 -brd)))  (do    (log3 "divlog2x")    (def brd3 (.. js/statejs -log23 -brd3)))  (log3anim2)  (do    (log2b "divlog20_2")    (def brd2b (.. js/statejs -log23 -brd2b)))  (do    (logtri "divlogtri")    (def brdtri (.. js/statejs -log23 -brdtri))    :end)  (trianim2)  (trianim3)  (trianim4)  (trianim5)  (trianim6)  (trianim7)  (apply mapv vector [[1 2] [3 4]])  :end)(defn log2a [intersect steps x]  (* (/ (js/Math.log (/ x intersect)) (js/Math.log 2)) steps))(defn graphp [brd fs fun colf colp]  (let [pts1 (notes/vpp fs)        pts2 (filter (fn [n]                       (get #{"A3" "B3" "C4" "D4" "E4" "F4" "G4" "A4" "B4" "C5" "D5" "E5" "F5" "G5" "A5"} (:name n))) pts1)]    (.create brd             "functiongraph"             #js[fun]             #js{:strokeColor colf                 :strokeWidth 2})    (run! (fn [p] (.. brd                      (create "point"                              #js[(:x p) (fun (:x p))]                              #js{:color colp})                      (setLabel "")))          pts2)))(defn many [divid]  (let [bb [-320 33            1480 -18]        am (am "Frequency [Hz]" "" bb)]    (set! (.. js/statejs -log23 -brdmany)          (.. js/JXG              -JSXGraph              (initBoard divid (clj->js am)))))  (graphp (.. js/statejs -log23 -brdmany) (js->clj (.-frequencies js/statejs)) (partial log2a 220 7) "red" "black"))(defn manyanim2 [intersect steps]  #_(manyanim2 330 7)  (graphp (.. js/statejs -log23 -brdmany) (js->clj (.-frequencies js/statejs)) (partial log2a intersect steps) "green" "green"))(set! (.. js/statejs -log23 -many) many)(set! (.. js/statejs -log23 -manyanim2) manyanim2)(comment  (many "divmanylogs")  (manyanim2 330 7)  :end) ')
</script>
</div>
<!--
::: {.column-margin}
<details>
<summary>--</summary>
<div id="divlog23" class="jxgbox" style="height:150px; width: 350px"></div>
<script>
statejs.log23.main("divlog23");
statejs.log23.anim2();
</script>
</details>
:::
-->
<details>
<summary id="5">
3
</summary>
<div id="blocklyDiv10" style="height: 150px; width: 800px">

</div>
<script>brender("(plot log2 [1 2 4 8])", "blocklyDiv10")</script>
<div id="blocklyDiv10_t" class="desc">
<p>And here, I hit the main message of my presentation. It is this. – It is the log2 that you plot. This is so obvious that I repeat: It is the log2 that you plot. The log2 is a perfectly good mathematical object. It is not the log2 of x or y or z. It is just log2. You plot just log2. That, in a nutshell, is my approach for plotting.</p>
</div>
<div id="943cb784" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>plot(log2, [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">8</span>])</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="log_files/figure-html/cell-5-output-1.png" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<script>
var clean5 = () => { brender("(plot log2 [1 2 4 8])", "blocklyDiv10"); cleandiv("blocklyDiv10_t");}
</script>
</details>

<div class="no-row-height column-margin column-container"><div class="">
<p><a href="#5" onclick="clean5()">_</a></p>
</div></div><details>
<summary id="3">
4
</summary>
<div id="divmanylogs" class="jxgbox" style="height:300px">

</div>
<script>
statejs.log23.many("divmanylogs");

const mywait = async () => {
  statejs.log23.manyanim2(110, 7);
  await delay(500);
  statejs.log23.manyanim2(440, 7);
  await delay(500);
  statejs.log23.manyanim2(880, 7);
};

var clean3 = () => {mywait(); cleandiv("divmanylogs_t")}
</script>
<span onclick="statejs.log23.many(&quot;divmanylogs&quot;)" style="color:blue">A</span> <span onclick="mywait()" style="color:blue">B</span>
<div id="divmanylogs_t" class="desc">
<p>While I do worry that I have not given my viewers enough time to digest this, I move on towards the practical goal. – I need to get more to something like this.</p>
</div>
</details>

<div class="no-row-height column-margin column-container"><div class="">
<p><a href="#3" onclick="clean3()">_</a></p>
</div></div><details>
<summary id="4">
5
</summary>
<div id="blocklyDiv5" style="height: 350px;">

</div>
<script>
var ws5 = brender(" (:tiles/infix (* (log2 (:tiles/infix (/ x 220))) 7))", "blocklyDiv5");

var addBlocks = (ws) => (s) =>
Blockly.Xml.appendDomToWorkspace(Blockly.utils.xml.textToDom(parse(s)), ws);
var abws5 = addBlocks(ws5);
</script>
<p><span style="color:blue">A</span> <span onclick="abws5('(Poe intersect steps x)'); abws5('(Poe intersect steps 440)'); abws5('(def :tiles/slot (return :tiles/slot))')" style="color:blue">B</span></p>
<div id="blocklyDiv5_t" class="desc">
<p>To plot the notes, I come back to the formula I showed at the beginning. I arrived at this formula by trial and error. This formula is the result of my plots and mistakes, the digested essence. You cannot plot this formula directly, at least when using my approach. This is the main theme again. I need a proper mathematical target to plot. -B- To get such a target, I need to wrap this formula into a procedure. – The procedure itself I gave the name Poe. It takes the arguments intersect, steps and the frequency x. – The procedure returns the formula. – You have to replace the numbers by the chosen names. -C- I provide the procedure as Python code.</p>
</div>
</details>
<script>
var four_ = () => {
var ws4u = brender(" (def (Poe intersect steps x) (return (:tiles/infix (* (log2 (:tiles/infix (/ x intersect))) steps))))", "blocklyDiv5");
var abws4u = addBlocks(ws4u);
abws4u('(Poe 220 7 440)')
abws4u('(Poe 1 1 2)')
cleandiv("blocklyDiv5_t")
}
</script>

<!--
<details>
<summary>--</summary>
<div id="jjjobs">
<div class="cljs-editor-new"><pre>(do (defn add-blocks [s] (display-html (str "&lt;tiles&gt;" s "&lt;/tiles&gt;")) :tiles)

(add-blocks '(def (log2a intersect steps x) (return :tiles/slot))))
(add-blocks '(log2a 220 7 440))
(add-blocks '(log2a 1 1 2))</pre></div>
</div>
</details>

<script src="jsfiles/rigsomelight.com/assets/inline-edit/main.js"></script>

<script>
function mutationCallback(customFn, mutationsList, observer) {
      mutationsList.forEach((mutation) => {
        if (mutation.target.className == "cljs-html-display active" &&
            mutation.type == "childList") {
        customFn(mutation.target.childNodes[0].innerText);
        }
    });
}

const observer = new MutationObserver(mutationCallback.bind(null, addBlocks(ws5)));
const targetNode = document.getElementById("jjjobs");
const config = { attributes: true, childList: true, subtree: true };
observer.observe(targetNode, config);
</script>

-->
<!--
:::{.column-screen-left}
<details>
<summary>xx</summary>

<table class="caption-top" data-quarto-postprocess="true">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td style="vertical-align: top"><div id="blocklyDivLog21" style="height: 150px; width: 230px">

</div>
<script>brender("(log2 x)", "blocklyDivLog21")</script></td>
<td><div id="divlog2x" class="jxgbox" style="height:300px; width: 800px">

</div>
<script>
statejs.log23.log3("divlog2x");
</script>
<span onclick="statejs.log23.log3(&quot;divlog2x&quot;)" style="color:blue">1</span> <span onclick="statejs.log23.log3anim2()" style="color:blue">2</span> <span onclick="statejs.log23.log3anim3()" style="color:blue">3</span></td>
</tr>
</tbody>
</table>

</details>
:::
-->
<div class="no-row-height column-margin column-container"><div class="">
<a href="#4" onclick="four_()">_</a>
<details>
<summary>
C
</summary>
<div style="width: 300px">
<div id="6cd6bf82" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> Poe(intersect, steps, x):</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> log2(x<span class="op">/</span>intersect) <span class="op">*</span> steps</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>Poe(<span class="dv">220</span>, <span class="dv">7</span>, <span class="dv">440</span>)</span></code></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="5">
<p><span class="math inline">\(\displaystyle 7.0\)</span></p>
</div>
</div>
</div>
</details>
</div></div><div class="column-screen-left">
<details>
<summary id="6">
6
</summary>
<table>
<tbody><tr>
<td style="vertical-align: top">
<div style="width: 230px">
<img src="jsfiles/xkcd_partial.jpg" style="horizontal-align: right">
</div>
</td>
<td style="vertical-align: top">
<div id="blocklyDiv14" style="height: 400px; width: 800px">

</div>
<script>
var r14= () => brender("(plot (partial Poe 220 7) [1 2 4 8])", "blocklyDiv14")
var ws6 = r14();
</script>
<p><span onclick="addBlocks(ws6)('(log2b intersect steps)'); addBlocks(ws6)('(log2b intersect steps)'); addBlocks(ws6)('(def :tiles/slot (return :tiles/slot))') " style="color:blue">D</span></p>
<div id="blocklyDiv14_t" class="desc">
<p>The procedure named Poe is not yet the mathematical target. The procedure Poe which does the calculation according to the original formula shares the same fate as this formula: also Poe cannot be plotted directly. To make the desired mathematical target out of Poe, I need to use a standard maneuver of computer science. You take the partial of Poe. – Here is my main theme in spades: “partial” taking a procedure to deliver the target to plot. Only now can you plot the scaled log2. – All this can in turn be wrapped in a procedure. – If all this is too much, maybe it helps that this notebook is online if you like to try yourself.</p>
</div>
</td>
</tr>
</tbody></table>
</details>
</div>
<div class="hidden">
<div id="647398b5" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> log2b(intersect, steps):</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> partial(Poe, intersect, steps)</span></code></pre></div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<a href="#6" onclick="r14(); cleandiv('blocklyDiv14_t')">_</a>
<details>
<summary>
A
</summary>
<div style="width: 300px">
<div id="9a9c61b7" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>plot(partial(Poe, <span class="dv">220</span>, <span class="dv">7</span>), [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">8</span>])</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="log_files/figure-html/cell-8-output-1.png" class="figure-img img-fluid"></p>
</figure>
</div>
</div>
</div>
</div>
</details>
<details>
<summary>
B
</summary>
<div style="width: 300px">
<div id="fb2303f9" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>plot(log2b(<span class="dv">220</span>, <span class="dv">7</span>), [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">8</span>])</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="log_files/figure-html/cell-9-output-1.png" class="figure-img img-fluid"></p>
</figure>
</div>
</div>
</div>
</div>
</details>
</div></div><details>
<summary id="9">
7
</summary>
<span onclick="" style="color:blue">A</span> <span onclick="abws19('x1')" style="color:blue">x1</span> <span onclick="abws19('0.7')" style="color:blue">0.7</span>
<div id="blocklyDiv19" style="height: 300px;">

</div>
<script>
r19 = () => brenderT("(call (log2b 1 1) x0)", "blocklyDiv19", true);
var ws19 = r19();
var abws19 = addBlocks(ws19);
</script>
<div id="blocklyDiv19_t" class="desc">
<p>Not only can log2b be plotted. Log2b can also be called. What might be surprising is that log2b can be called with a symbol. – I chose x0 as the symbol in this example. – But it is arbitrary. It could also have been x1. Remember that log2 does not know anything about x or y or z. – Also, the step argument does not need to be an integer, it can well be 0 point 7.</p>
</div>
</details>
<script>
var fu19 = () => {
var ws19_E = brenderT("(call (log2b 1 0.7) x1)", "blocklyDiv19", true);
var abws19_E = addBlocks(ws19_E);
// abws19_E('(call (log2b 1 1) x1)')
// abws19_E('(call (log2b 1 0.7) x1)')
}
</script>

<div class="no-row-height column-margin column-container"><div class="">
<a href="#9" onclick="fu19(); cleandiv('blocklyDiv19_t');">_</a>
<details>
<summary>
B
</summary>
<div style="width: 300px">
<div id="83b50ba9" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>call(log2b(<span class="dv">1</span>, <span class="dv">1</span>), x0)</span></code></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="9">
<p><span class="math inline">\(\displaystyle \operatorname{log}_{2}{\left(x_{0} \right)}\)</span></p>
</div>
</div>
</div>
</details>
<details>
<summary>
C
</summary>
<div style="width: 300px">
<div id="b9efb09f" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>call(log2b(<span class="dv">1</span>, <span class="dv">1</span>), x1)</span></code></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="10">
<p><span class="math inline">\(\displaystyle \operatorname{log}_{2}{\left(x_{1} \right)}\)</span></p>
</div>
</div>
</div>
</details>
<details>
<summary>
D
</summary>
<div style="width: 300px">
<div id="b4f84ef7" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>call(log2b(<span class="dv">1</span>, <span class="fl">0.7</span>), x1)</span></code></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="11">
<p><span class="math inline">\(\displaystyle 0.7 \operatorname{log}_{2}{\left(x_{1} \right)}\)</span></p>
</div>
</div>
</div>
</details>
</div></div><details>
<summary id="11">
8
</summary>
<div id="divlogtri" class="jxgbox" style="height:300px;">

</div>
<script>
statejs.strfrac1ovX = "$$\\frac{1}{x}$$";
statejs.log23.logtri("divlogtri");
</script>
<span onclick="statejs.log23.logtri(&quot;divlogtri&quot;)" style="color:blue">A</span> <span onclick="statejs.log23.trianim2()" style="color:blue">B</span> <span onclick="statejs.log23.trianim3()" style="color:blue">C</span> <span onclick="statejs.log23.trianim4()" style="color:blue">D</span> <span onclick="statejs.log23.trianim5()" style="color:blue">E</span> <span onclick="statejs.log23.trianim6()" style="color:blue">F</span> <span onclick="statejs.log23.trianim7()" style="color:blue">G</span>
<div id="divlogtri_t" class="desc">
<p>In fact, the case 0.7 is almost a special one. – As any curve, it can be approximated by triangles. – I move the triangles to the ground level. – Now the curve known as “one over x” fits their hights quite nicely. – You can also try the other way around – That does not work quite as well. – The trick is to shrink the area of the triangle while retaining its shape.</p>
</div>
</details>

<div class="no-row-height column-margin column-container"><div class="">
<p><a href="#11" onclick="cleandiv('divlogtri_t');">_</a></p>
</div></div><details>
<summary id="12">
9
</summary>
<div id="blocklyDiv17a" style="height:150px">

</div>
<script>var ws17a = brender("(call (log2b 1 0.7) x0)", "blocklyDiv17a")
var ab = addBlocks(ws17a);
</script>
<span onclick="ab('(D :tiles/slot)')" style="color:blue">D</span>
<div id="blocklyDiv17a_t" class="desc">
<p>This triangle business smells of derivatives. – Taking the derivate is simple and easy.</p>
</div>
</details>

<div class="no-row-height column-margin column-container"><div class="">
<p><a href="#12" onclick="brender('(call (D (log2b 1 0.7)) x0)', 'blocklyDiv17a'); cleandiv('blocklyDiv17a_t');">_</a></p>
</div></div><details>
<summary id="13">
10
</summary>
<div id="394e4745" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>call(D(log2b(<span class="dv">1</span>, <span class="fl">0.7</span>)), x0).evalf()</span></code></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="12">
<p><span class="math inline">\(\displaystyle \frac{1.00988652862227}{x_{0}}\)</span></p>
</div>
</div>
<div id="blocklyDiv22a" style="height:100px">

</div>
<script>
var r13 = () => brender("(call (D ln) x0)", "blocklyDiv22a");
r13();
</script>
<div id="d9a51b57" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>call(D(ln), x0)</span></code></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="13">
<p><span class="math inline">\(\displaystyle \frac{1}{x_{0}}\)</span></p>
</div>
</div>
<div id="blocklyDiv22a_t" class="desc">
<p>If I do the actual calculation with 0.7, I nearly get one over x for the derivative. To get the exact result, I need to switch to the natural logarithm ln.</p>
</div>
</details>

<div class="no-row-height column-margin column-container"><div class="">
<p><a href="#blocklyDiv22a" onclick="r13(); cleandiv('blocklyDiv22a_t');">_</a></p>
</div></div><details>
<summary id="14">
–
</summary>
<span class="math display">\[\Large \left. \frac{d \ln(x)}{dx} \right|_{x=x_0}\]</span>
<div id="tex14_t" class="desc">
<p>The usual mathematical notation for the derivative at point x0 is by unsing the vertical bar, colloquially called pipe.</p>
</div>
</details>

<div class="no-row-height column-margin column-container"><div class="">
<p><a href="#blocklyDiv22a" onclick="cleandiv('tex14_t');">_</a></p>
</div></div><details>
<summary id="15">
–
</summary>
<div id="blocklyDivpipe" style="height:100px">

</div>
<script>
var r15 = () => brender("((D ln) x0)", "blocklyDivpipe");
r15();
</script>
<div id="72cb2eed" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>(D(ln) <span class="op">|</span> x0)</span></code></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="14">
<p><span class="math inline">\(\displaystyle \frac{1}{x_{0}}\)</span></p>
</div>
</div>
<div id="blocklyDivpipe_t" class="desc">
<p>In my pictorial representation, I’d like to do the same. Note that it is not the D procedure that is representd by the pipe symbol. It is the call procedure that is dropped and replaced by the pipe.</p>
</div>
</details>

<div class="no-row-height column-margin column-container"><div class="">
<p><a href="#15" onclick="r15(); cleandiv('blocklyDivpipe_t');">_</a></p>
</div></div><details>
<summary id="16">
11
</summary>
<div id="blocklyDivpipe2" style="height:100px">

</div>
<script>
var r16 = () => brender("((log2b 220 7) 440)", "blocklyDivpipe2");
r16();
</script>
<div id="e130ab30" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>(log2b(<span class="dv">220</span>, <span class="dv">7</span>) <span class="op">|</span> <span class="dv">440</span>)</span></code></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="15">
<p><span class="math inline">\(\displaystyle 7.0\)</span></p>
</div>
</div>
<div id="blocklyDivpipe2_t" class="desc">
<p>All this means that also a direct call to log2b can be done with a pipe. – You might think that such a custom pipe is a lot of work. This is not so. My custom pipe is just a few lines of Python.</p>
</div>
</details>

<div class="no-row-height column-margin column-container"><div class="">
<p><a href="#16" onclick="r16(); cleandiv('blocklyDivpipe2_t');">_</a></p>
<details>
<summary>
A
</summary>
<div style="width: 300px">
<div id="5fe98aaa" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> PipeAsCall(<span class="bu">object</span>):</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, func):</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.func <span class="op">=</span> func</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__or__</span>(<span class="va">self</span>, other):</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.func(other)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__call__</span>(<span class="va">self</span>, x):</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.func(x)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> partial(<span class="op">*</span>args):</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> PipeAsCall(</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>        functools.partial(<span class="op">*</span>args))</span></code></pre></div>
</div>
</div>
</details>
</div></div><script>
document.querySelectorAll("details")
.forEach(d => d.setAttribute("open", ""))
</script>



</main> <!-- /main -->
</div> <!-- /content -->




<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>